<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="dmMessageNick">
    
    <!-- 특정 채팅방에서 회원이 삭제하지 않은 모든 메시지 조회 -->
	<select id="getUndeletedMessages" resultType="DmMessageNickDto">
		select * from dm_message_nick 
		where room_no=#{roomNo} and message_no 
		not in(select message_no from dm_message_deleted 
		where member_no=#{memberNo})
	</select>

</mapper>